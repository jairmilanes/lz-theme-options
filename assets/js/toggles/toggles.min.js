$.fn.toggles=function(c){c=c||{};var e=$.extend({drag:true,click:true,text:{on:"ON",off:"OFF"},on:false,animate:250,transition:"ease-in-out",checkbox:null,clicker:null,width:50,height:20,type:"compact"},c);var b=(e.type=="select");e.checkbox=$(e.checkbox);if(e.clicker){e.clicker=$(e.clicker)}var g="margin-left "+e.animate+"ms "+e.transition;var f={"-webkit-transition":g,"-moz-transition":g,transition:g};var d={"-webkit-transition":"","-moz-transition":"",transition:""};var a=function(i,k,h,m){var n=i.toggleClass("active").hasClass("active");if(m===n){return}var j=i.find(".toggle-inner").css(f);i.find(".toggle-off").toggleClass("active");i.find(".toggle-on").toggleClass("active");e.checkbox.prop("checked",true);if(b){return}var l=n?0:-k+h;j.css("margin-left",l);setTimeout(function(){j.css(d);j.css("margin-left",l)},e.animate)};return this.each(function(){var o=$(this);var u=o.height();var k=o.width();if(!u||!k){o.height(u=e.height);o.width(k=e.width)}var j='<div class="toggle-';var p=$(j+'slide">');var v=$(j+'inner">');var q=$(j+'on">');var l=$(j+'off">');var h=$(j+'blob">');var r=u/2;var t=k-r;q.css({height:u,width:t,textAlign:"center",textIndent:b?"":-r,lineHeight:u+"px"}).html(e.text["on"]);l.css({height:u,width:t,marginLeft:b?"":-r,textAlign:"center",textIndent:b?"":r,lineHeight:u+"px"}).html(e.text["off"]).addClass("active");h.css({height:u,width:u,marginLeft:-r});v.css({width:k*2-u,marginLeft:b?0:-k+u});if(b){p.addClass("toggle-select");o.css("width",t*2);h.hide()}o.html(p.html(v.append(q,h,l)));p.on("toggle",function(x,w){if(x){x.stopPropagation()}a(p,k,u);o.trigger("toggle",w)});o.on("toggleOn",function(){a(p,k,u,false)});o.on("toggleOff",function(){a(p,k,u,true)});if(e.on){a(p,k,u)}if(e.click&&(!e.clicker||!e.clicker.has(o).length)){o.on("click touchstart",function(w){w.stopPropagation();if(w.target!=h[0]||!e.drag){p.trigger("toggle",p.hasClass("active"))}})}if(e.clicker){e.clicker.on("click touchstart",function(w){w.stopPropagation();if(w.target!=h[0]||!e.drag){p.trigger("toggle",p.hasClass("active"))}})}if(!e.drag||b){return}var s;var n=(k-u)/4;var m=function(x){o.off("mousemove touchmove");p.off("mouseleave");h.off("mouseup touchend");var w=p.hasClass("active");if(!s&&e.click&&x.type!=="mouseleave"){p.trigger("toggle",w);return}if(w){if(s<-n){p.trigger("toggle",w)}else{v.animate({marginLeft:0},e.animate/2)}}else{if(s>n){p.trigger("toggle",w)}else{v.animate({marginLeft:-k+u},e.animate/2)}}};var i=-k+u;h.on("mousedown touchstart",function(w){s=0;h.off("mouseup touchend");p.off("mouseleave");var x=w.pageX;o.on("mousemove touchmove",h,function(z){s=z.pageX-x;var y;if(p.hasClass("active")){y=s;if(s>0){y=0}if(s<i){y=i}}else{y=s+i;if(s<0){y=i}if(s>-i){y=0}}v.css("margin-left",y)});h.on("mouseup touchend",m);p.on("mouseleave",m)})})};